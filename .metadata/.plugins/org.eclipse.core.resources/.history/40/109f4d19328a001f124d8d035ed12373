package Service;

import java.io.IOException;
import java.sql.SQLException;
import Dao.CustomerDaoImpl;
import Dao.FlightScheduleDaoImpl;
import Dao.RouteDaoImpl;
import Dao.SeatDaoImpl;
import Model.Customer;
import Model.FlightSchedule;
import Model.Seat;
import Model.Ticket;

public class BookingService extends BaseService {
	
	CustomerDaoImpl customerDao = new CustomerDaoImpl();
	FlightScheduleDaoImpl flightScheduleDao = new FlightScheduleDaoImpl();
	RouteDaoImpl routeDao = new RouteDaoImpl();
	SeatDaoImpl seatdao = new SeatDaoImpl();

	public void book() throws IOException, SQLException {
		
		Customer customer = this.chooseCustomer();
		
		

		
		
		System.out.println(flightScheduleDao.getAll());
		System.out.println("Please choose the flight schedules : ");
		int scheduleid = Integer.parseInt(bufferedReader.readLine());
		FlightSchedule flightSchedule = flightScheduleDao.getById(scheduleid);
		
		System.out.println(seatdao.getAll());
		this.chooseSeats(scheduleid);
		
		
		
	}
	
	public void chooseSeats(int scheduleid) throws NumberFormatException, IOException {
		System.out.println("Please choose the seat : ");
		int seatid = Integer.parseInt(bufferedReader.readLine());
		
		if(seatdao.isAvailableSeat(scheduleid, seatid)) {;
			Seat seat = seatdao.getById(seatid);
			double price = seat.calculatePrice();
			Ticket ticket = new Ticket(flightSchedule, customer,seat,price);
		}
	}
	
	public Customer chooseCustomer() throws NumberFormatException, IOException {
		System.out.println(customerDao.getAll());
		System.out.println("Please enter the customer Id : ");
		int id = Integer.parseInt(bufferedReader.readLine());
		Customer customer = customerDao.getById(id);
		return customer;
	}
	
	public void chooseRoute() {
		System.out.println(routeDao.getAll());
		System.out.println("Please choose the routes by id : ");
		int routeid = Integer.parseInt(bufferedReader.readLine()); 
	}
	
	
	
	

}
