package view;

import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPasswordField;
import javax.swing.JTextField;

import Service.AuthenticationService;
import exception.IncorrectPasswordException;
import exception.IncorrectUserNameException;

public class SignInpage {
	private JFrame frame;
	private JLabel userLablel;
	private JTextField userTextField;
	
	private JLabel passLabel;
	private JPasswordField passField;
	
	private JLabel confirmPassLabel;
	private JPasswordField confirmPassField;
	
	private JButton loginButton;
	private JButton resetButton;

	public SignInpage() {
		initializeComponents();
		setupLayout();
		setupLoginButtonAction();
		frame.setLocationRelativeTo(null);
		frame.setVisible(true);
	}

	private void setupLoginButtonAction() {
		this.loginButton.addActionListener(new ActionListener() {
			@Override
			public void actionPerformed(ActionEvent e) {
				String username = userTextField.getText();
				String password = new String(passField.getPassword());
				String confirmPassword = new String();
				
				try {
				AuthenticationService.login(username,password);
				LoginWindow homePage = new LoginWindow();
				}
				
				catch (IncorrectPasswordException e2) {
					JOptionPane.showMessageDialog(frame, e2.getMessage(), "Error",
							JOptionPane.ERROR_MESSAGE);
				}
				catch (IncorrectUserNameException e3) {
					JOptionPane.showMessageDialog(frame, e3.getMessage(), "Error",
							JOptionPane.ERROR_MESSAGE);
				}} });
}

	private void initializeComponents() {
		this.frame = new JFrame("Login Window");
		this.userLablel = new JLabel("Username:");
		this.userTextField = new JTextField(15);
		this.passLabel = new JLabel("Password:");
		this.passField = new JPasswordField(15);
		this.loginButton = new JButton("Login");
		this.resetButton = new JButton("Reset");

	}

	private void setupLayout() {
		this.frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		this.frame.setSize(350, 200);
		this.frame.setLayout(new GridBagLayout());

		GridBagConstraints constraints = new GridBagConstraints();
		constraints.insets = new Insets(10, 10, 10, 10);

		constraints.gridx = 0;
		constraints.gridy = 0;

		frame.add(this.userLablel, constraints);

		constraints.gridx = 1;

		frame.add(this.userTextField, constraints);

		constraints.gridx = 0;
		constraints.gridy = 1;

		frame.add(this.passLabel, constraints);

		constraints.gridx = 1;

		frame.add(this.passField, constraints);

		constraints.gridx = 0;
		constraints.gridy = 2;

		frame.add(this.loginButton, constraints);

		constraints.gridx = 1;

		frame.add(this.resetButton, constraints);

	}
}
